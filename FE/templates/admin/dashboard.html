{% extends 'admin/base.html' %}

{% block content %}
<div class="admin-dashboard" style="padding: 30px;">
    <h2 style="margin-bottom: 24px; color: #333;">ðŸ“Š Admin Dashboard</h2>

    <div id="adminWalletStatus" style="background: #f5f5f5; padding: 16px; border-radius: 8px; margin-bottom: 24px;">
        <strong>Wallet Status:</strong>
        <span id="walletStatusText">Checking...</span>
    </div>

    <div class="stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
        <div class="stat-card" style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 4px solid #4CAF50;">
            <h3 id="totalBooksCount" style="margin: 0; font-size: 32px; color: #4CAF50;">-</h3>
            <p style="margin: 8px 0 0 0; color: #666;">Total Books</p>
        </div>
        <div class="stat-card" style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 4px solid #2196F3%;">
            <h3 id="availableBooksCount" style="margin: 0; font-size: 32px; color: #2196F3;">-</h3>
            <p style="margin: 8px 0 0 0; color: #666;">Available</p>
        </div>
        <div class="stat-card" style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 4px solid #FF9800;">
            <h3 id="borrowedBooksCount" style="margin: 0; font-size: 32px; color: #FF9800;">-</h3>
            <p style="margin: 8px 0 0 0; color: #666;">Borrowed</p>
        </div>
    </div>

    <section style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 24px;">
        <h3 style="margin: 0 0 20px 0; color: #333;">âž• Mint New Book</h3>
        <form id="mintBookForm">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 16px;">
                <div>
                    <label style="display:block;margin-bottom:8px;font-weight:600;color:#333;">Book Name *</label>
                    <input type="text" id="bookName" required style="width:100%;padding:10px;border:2px solid #e0e0e0;border-radius:6px;">
                </div>
                <div>
                    <label style="display:block;margin-bottom:8px;font-weight:600;color:#333;">Author</label>
                    <input type="text" id="bookAuthor" style="width:100%;padding:10px;border:2px solid #e0e0e0;border-radius:6px;">
                </div>
            </div>
            <div style="margin-top:16px;">
                <label style="display:block;margin-bottom:8px;font-weight:600;color:#333;">Description *</label>
                <textarea id="bookDescription" required rows="3" style="width:100%;padding:10px;border:2px solid #e0e0e0;border-radius:6px;"></textarea>
            </div>
            <button type="submit" class="primary-btn" style="margin-top:16px;padding:12px 24px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;border:none;border-radius:8px;font-weight:600;cursor:pointer;">
                âž• Mint Book to Blockchain
            </button>
        </form>
        <div id="mintResult" style="margin-top:16px;"></div>
    </section>

    <section style="background:white;padding:24px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.1);margin-bottom:24px;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
            <h3 style="margin:0;color:#333;">ðŸ“š Books on Blockchain</h3>
            <button onclick="loadAdminBooksTable()" style="padding:8px 16px;background:#2196F3;color:white;border:none;border-radius:6px;cursor:pointer;">ðŸ”„ Refresh</button>
        </div>
        <div id="adminBooksTable">Loading...</div>
    </section>

    <section style="background:white;padding:24px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.1);">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
            <h3 style="margin:0;color:#333;">ðŸ‘¥ Currently Borrowed Books</h3>
            <button onclick="loadBorrowedBooksTable()" style="padding:8px 16px;background:#FF9800;color:white;border:none;border-radius:6px;cursor:pointer;">ðŸ”„ Refresh</button>
        </div>
        <div id="borrowedBooksTable">Loading...</div>
    </section>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/admin/blockchain-admin.js') }}"></script>
{% endblock %}

